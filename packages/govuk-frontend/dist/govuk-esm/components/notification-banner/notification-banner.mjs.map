{"version":3,"file":"notification-banner.mjs","sources":["../../../../src/govuk/components/notification-banner/notification-banner.mjs"],"sourcesContent":["import { mergeConfigs } from '../../common/index.mjs'\nimport { normaliseDataset } from '../../common/normalise-dataset.mjs'\n\n/**\n * Notification Banner component\n *\n * @class\n * @param {Element} $module - HTML element to use for notification banner\n * @param {NotificationBannerConfig} [config] - Notification banner config\n */\nfunction NotificationBanner ($module, config) {\n  if (!($module instanceof HTMLElement)) {\n    return this\n  }\n\n  /** @deprecated Will be made private in v5.0 */\n  this.$module = $module\n\n  /** @type {NotificationBannerConfig} */\n  var defaultConfig = {\n    disableAutoFocus: false\n  }\n\n  /**\n   * @deprecated Will be made private in v5.0\n   * @type {NotificationBannerConfig}\n   */\n  this.config = mergeConfigs(\n    defaultConfig,\n    config || {},\n    normaliseDataset($module.dataset)\n  )\n}\n\n/**\n * Initialise component\n */\nNotificationBanner.prototype.init = function () {\n  // Check that required elements are present\n  if (!this.$module) {\n    return\n  }\n\n  this.setFocus()\n}\n\n/**\n * Focus the element\n *\n * If `role=\"alert\"` is set, focus the element to help some assistive technologies\n * prioritise announcing it.\n *\n * You can turn off the auto-focus functionality by setting `data-disable-auto-focus=\"true\"` in the\n * component HTML. You might wish to do this based on user research findings, or to avoid a clash\n * with another element which should be focused when the page loads.\n *\n * @deprecated Will be made private in v5.0\n */\nNotificationBanner.prototype.setFocus = function () {\n  var $module = this.$module\n\n  if (this.config.disableAutoFocus) {\n    return\n  }\n\n  if ($module.getAttribute('role') !== 'alert') {\n    return\n  }\n\n  // Set tabindex to -1 to make the element focusable with JavaScript.\n  // Remove the tabindex on blur as the component doesn't need to be focusable after the page has\n  // loaded.\n  if (!$module.getAttribute('tabindex')) {\n    $module.setAttribute('tabindex', '-1')\n\n    $module.addEventListener('blur', function () {\n      $module.removeAttribute('tabindex')\n    })\n  }\n\n  $module.focus()\n}\n\nexport default NotificationBanner\n\n/**\n * Notification banner config\n *\n * @typedef {object} NotificationBannerConfig\n * @property {boolean} [disableAutoFocus=false] - If set to `true` the\n *   notification banner will not be focussed when the page loads. This only\n *   applies if the component has a `role` of `alert` â€“ in other cases the\n *   component will not be focused on page load, regardless of this option.\n */\n"],"names":[],"mappings":";;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,kBAAkB,EAAE,OAAO,EAAE,MAAM,EAAE;AAC9C,EAAE,IAAI,EAAE,OAAO,YAAY,WAAW,CAAC,EAAE;AACzC,IAAI,OAAO,IAAI;AACf,GAAG;AACH;AACA;AACA,EAAE,IAAI,CAAC,OAAO,GAAG,QAAO;AACxB;AACA;AACA,EAAE,IAAI,aAAa,GAAG;AACtB,IAAI,gBAAgB,EAAE,KAAK;AAC3B,IAAG;AACH;AACA;AACA;AACA;AACA;AACA,EAAE,IAAI,CAAC,MAAM,GAAG,YAAY;AAC5B,IAAI,aAAa;AACjB,IAAI,MAAM,IAAI,EAAE;AAChB,IAAI,gBAAgB,CAAC,OAAO,CAAC,OAAO,CAAC;AACrC,IAAG;AACH,CAAC;AACD;AACA;AACA;AACA;AACA,kBAAkB,CAAC,SAAS,CAAC,IAAI,GAAG,YAAY;AAChD;AACA,EAAE,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE;AACrB,IAAI,MAAM;AACV,GAAG;AACH;AACA,EAAE,IAAI,CAAC,QAAQ,GAAE;AACjB,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,CAAC,SAAS,CAAC,QAAQ,GAAG,YAAY;AACpD,EAAE,IAAI,OAAO,GAAG,IAAI,CAAC,QAAO;AAC5B;AACA,EAAE,IAAI,IAAI,CAAC,MAAM,CAAC,gBAAgB,EAAE;AACpC,IAAI,MAAM;AACV,GAAG;AACH;AACA,EAAE,IAAI,OAAO,CAAC,YAAY,CAAC,MAAM,CAAC,KAAK,OAAO,EAAE;AAChD,IAAI,MAAM;AACV,GAAG;AACH;AACA;AACA;AACA;AACA,EAAE,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,UAAU,CAAC,EAAE;AACzC,IAAI,OAAO,CAAC,YAAY,CAAC,UAAU,EAAE,IAAI,EAAC;AAC1C;AACA,IAAI,OAAO,CAAC,gBAAgB,CAAC,MAAM,EAAE,YAAY;AACjD,MAAM,OAAO,CAAC,eAAe,CAAC,UAAU,EAAC;AACzC,KAAK,EAAC;AACN,GAAG;AACH;AACA,EAAE,OAAO,CAAC,KAAK,GAAE;AACjB,EAAC;AAGD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;"}