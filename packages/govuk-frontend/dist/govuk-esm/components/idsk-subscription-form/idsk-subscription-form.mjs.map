{"version":3,"file":"idsk-subscription-form.mjs","sources":["../../../../src/govuk/components/idsk-subscription-form/idsk-subscription-form.mjs"],"sourcesContent":["/* eslint-disable */\n\n/**\n * SubscriptionForm\n *\n * @param {object} $module - The module to enhance\n */\nfunction IdskSubscriptionForm ($module) {\n  this.$module = $module\n}\n\n/**\n * SubscriptionForm init function\n */\nIdskSubscriptionForm.prototype.init = function () {\n  // Check for module\n  var $module = this.$module\n  if (!$module) {\n    return\n  }\n\n  // button to toggle content\n  var $form = $module.querySelector('.idsk-subscription-form__submit-handler')\n  if ($form) {\n    $form.addEventListener('submit', this.handleSubmitForm.bind(this))\n  }\n\n  var $input = $module.querySelector('.govuk-input')\n\n  $input.addEventListener('change', this.handleInput.bind(this))\n}\n\n/**\n * An event handler for submit event on $form\n *\n * @param {object} e - The event object\n */\nIdskSubscriptionForm.prototype.handleSubmitForm = function (e) {\n  e.preventDefault()\n  var $input = e.target.querySelector('#subscription-email-value')\n  var $formGroup = $input.parentElement\n\n  // Handle email validation\n  if (!$input.checkValidity()) {\n    $formGroup.querySelectorAll('.govuk-error-message').forEach(function (e) {\n      e.remove()\n    })\n    var $errorLabel = document.createElement('span')\n    $errorLabel.classList.add('govuk-error-message')\n    $errorLabel.textContent = $input.validationMessage\n\n    $input.classList.add('govuk-input--error')\n    $formGroup.classList.add('govuk-form-group--error')\n    $input.before($errorLabel)\n    return\n  }\n\n  // set class for different state\n  this.$module.classList.add('idsk-subscription-form__subscription-confirmed')\n}\n\n/**\n * SubscriptionForm handleInput handler\n *\n * @param {object} e - The event object\n */\nIdskSubscriptionForm.prototype.handleInput = function (e) {\n  var $el = e.target || e.srcElement || e\n  var $searchComponent = $el.closest('.idsk-subscription-form__input')\n  var $searchLabel = $searchComponent.querySelector('label')\n\n  // Handle label visibility\n  if ($el.value === '') {\n    $searchLabel.classList.remove('govuk-visually-hidden')\n  } else {\n    $searchLabel.classList.add('govuk-visually-hidden')\n  }\n}\nexport default IdskSubscriptionForm\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,oBAAoB,EAAE,OAAO,EAAE;AACxC,EAAE,IAAI,CAAC,OAAO,GAAG,QAAO;AACxB,CAAC;AACD;AACA;AACA;AACA;AACA,oBAAoB,CAAC,SAAS,CAAC,IAAI,GAAG,YAAY;AAClD;AACA,EAAE,IAAI,OAAO,GAAG,IAAI,CAAC,QAAO;AAC5B,EAAE,IAAI,CAAC,OAAO,EAAE;AAChB,IAAI,MAAM;AACV,GAAG;AACH;AACA;AACA,EAAE,IAAI,KAAK,GAAG,OAAO,CAAC,aAAa,CAAC,yCAAyC,EAAC;AAC9E,EAAE,IAAI,KAAK,EAAE;AACb,IAAI,KAAK,CAAC,gBAAgB,CAAC,QAAQ,EAAE,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,EAAC;AACtE,GAAG;AACH;AACA,EAAE,IAAI,MAAM,GAAG,OAAO,CAAC,aAAa,CAAC,cAAc,EAAC;AACpD;AACA,EAAE,MAAM,CAAC,gBAAgB,CAAC,QAAQ,EAAE,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,EAAC;AAChE,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,CAAC,SAAS,CAAC,gBAAgB,GAAG,UAAU,CAAC,EAAE;AAC/D,EAAE,CAAC,CAAC,cAAc,GAAE;AACpB,EAAE,IAAI,MAAM,GAAG,CAAC,CAAC,MAAM,CAAC,aAAa,CAAC,2BAA2B,EAAC;AAClE,EAAE,IAAI,UAAU,GAAG,MAAM,CAAC,cAAa;AACvC;AACA;AACA,EAAE,IAAI,CAAC,MAAM,CAAC,aAAa,EAAE,EAAE;AAC/B,IAAI,UAAU,CAAC,gBAAgB,CAAC,sBAAsB,CAAC,CAAC,OAAO,CAAC,UAAU,CAAC,EAAE;AAC7E,MAAM,CAAC,CAAC,MAAM,GAAE;AAChB,KAAK,EAAC;AACN,IAAI,IAAI,WAAW,GAAG,QAAQ,CAAC,aAAa,CAAC,MAAM,EAAC;AACpD,IAAI,WAAW,CAAC,SAAS,CAAC,GAAG,CAAC,qBAAqB,EAAC;AACpD,IAAI,WAAW,CAAC,WAAW,GAAG,MAAM,CAAC,kBAAiB;AACtD;AACA,IAAI,MAAM,CAAC,SAAS,CAAC,GAAG,CAAC,oBAAoB,EAAC;AAC9C,IAAI,UAAU,CAAC,SAAS,CAAC,GAAG,CAAC,yBAAyB,EAAC;AACvD,IAAI,MAAM,CAAC,MAAM,CAAC,WAAW,EAAC;AAC9B,IAAI,MAAM;AACV,GAAG;AACH;AACA;AACA,EAAE,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,gDAAgD,EAAC;AAC9E,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,CAAC,SAAS,CAAC,WAAW,GAAG,UAAU,CAAC,EAAE;AAC1D,EAAE,IAAI,GAAG,GAAG,CAAC,CAAC,MAAM,IAAI,CAAC,CAAC,UAAU,IAAI,EAAC;AACzC,EAAE,IAAI,gBAAgB,GAAG,GAAG,CAAC,OAAO,CAAC,gCAAgC,EAAC;AACtE,EAAE,IAAI,YAAY,GAAG,gBAAgB,CAAC,aAAa,CAAC,OAAO,EAAC;AAC5D;AACA;AACA,EAAE,IAAI,GAAG,CAAC,KAAK,KAAK,EAAE,EAAE;AACxB,IAAI,YAAY,CAAC,SAAS,CAAC,MAAM,CAAC,uBAAuB,EAAC;AAC1D,GAAG,MAAM;AACT,IAAI,YAAY,CAAC,SAAS,CAAC,GAAG,CAAC,uBAAuB,EAAC;AACvD,GAAG;AACH;;;;"}