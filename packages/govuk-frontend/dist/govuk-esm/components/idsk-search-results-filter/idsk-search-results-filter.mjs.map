{"version":3,"file":"idsk-search-results-filter.mjs","sources":["../../../../src/govuk/components/idsk-search-results-filter/idsk-search-results-filter.mjs"],"sourcesContent":["/* eslint-disable */\n\nimport { toggleClass } from '../../common.mjs'\n\n/**\n * SearchResultsFilter component\n *\n * @param {object} $module - The module to enhance\n */\nfunction IdskSearchResultsFilter ($module) {\n  this.$module = $module\n}\n\n/**\n * SearchResultsFilter init function\n */\nIdskSearchResultsFilter.prototype.init = function () {\n  // Check for module\n  var $module = this.$module\n  if (!$module) {\n    return\n  }\n\n  var $linkPanelButtons = $module.querySelectorAll(\n    '.idsk-search-results__link-panel-button'\n  )\n  if (!$linkPanelButtons) {\n    return\n  }\n\n  var $topicSearchInput = $module.querySelector('#idsk-search-input__topic')\n  if ($topicSearchInput) {\n    $topicSearchInput.addEventListener(\n      'keyup',\n      this.handleSearchItemsFromInput.bind(this, 'radios')\n    )\n  }\n\n  var $subtopicSearchInput = $module.querySelector(\n    '#idsk-search-input__subtopic'\n  )\n  if ($subtopicSearchInput) {\n    $subtopicSearchInput.addEventListener(\n      'keyup',\n      this.handleSearchItemsFromInput.bind(this, 'radios')\n    )\n  }\n\n  var $contentTypeSearchInput = $module.querySelector(\n    '#idsk-search-input__content-type'\n  )\n  if ($contentTypeSearchInput) {\n    $contentTypeSearchInput.addEventListener(\n      'keyup',\n      this.handleSearchItemsFromInput.bind(this, 'checkboxes')\n    )\n  }\n\n  var $radioButtonsInput = $module.querySelectorAll(\n    '.idsk-search-results__filter .govuk-radios__input '\n  )\n  if (!$radioButtonsInput) {\n    return\n  }\n\n  var $contentTypeCheckBoxes = $module.querySelectorAll(\n    '.idsk-search-results__filter .govuk-checkboxes__input '\n  )\n  if (!$contentTypeCheckBoxes) {\n    return\n  }\n\n  $radioButtonsInput.forEach(\n    function ($input) {\n      $input.addEventListener(\n        'click',\n        this.handleClickRadioButton.bind(this),\n        true\n      )\n    }.bind(this)\n  )\n\n  $contentTypeCheckBoxes.forEach(\n    function ($checkBox) {\n      $checkBox.addEventListener(\n        'click',\n        this.handleClickContentTypeCheckBox.bind(this),\n        true\n      )\n    }.bind(this)\n  )\n\n  $linkPanelButtons.forEach(\n    function ($button) {\n      $button.addEventListener('click', this.handleClickLinkPanel.bind(this))\n    }.bind(this)\n  )\n}\n\n/**\n * SearchResultsFilter handleClickRadioButton handler\n *\n * @param {object} e - Event\n */\nIdskSearchResultsFilter.prototype.handleClickRadioButton = function (e) {\n  var $el = e.target || e.srcElement\n  var $linkPanelButton = $el.closest('.idsk-search-results__link-panel')\n  var $buttonCaption = $linkPanelButton.querySelector(\n    '.idsk-search-results__link-panel--span'\n  )\n\n  $buttonCaption.innerText = '1 vybraté'\n}\n\n/**\n * SearchResultsFilter handleClickContentTypeCheckBox handler\n *\n * @param {object} e - Event\n */\nIdskSearchResultsFilter.prototype.handleClickContentTypeCheckBox = function (e) {\n  var $el = e.target || e.srcElement\n  var $linkPanelButton = $el.closest('.idsk-search-results__link-panel')\n  var $checkBoxes = $el.closest('.govuk-checkboxes')\n\n  this.handleCountOfPickedContentTypes.call(this, $checkBoxes, $linkPanelButton)\n}\n\n/**\n * SearchResultsFilter handleCountOfPickedContentTypes handler\n *\n * @param {object} $checkBoxes - checkboxes element\n * @param {object} $linkPanelButton - link panel button element\n */\nIdskSearchResultsFilter.prototype.handleCountOfPickedContentTypes = function (\n  $checkBoxes,\n  $linkPanelButton\n) {\n  var $buttonCaption = $linkPanelButton.querySelector(\n    '.idsk-search-results__link-panel--span'\n  )\n  var $counter = 0\n\n  if ($checkBoxes) {\n    $checkBoxes.querySelectorAll('.govuk-checkboxes__input').forEach(\n      function ($checkBox) {\n        if ($checkBox.checked) {\n          $counter = $counter + 1\n        }\n      }.bind(this)\n    )\n  }\n  if ($counter === 0) {\n    $buttonCaption.innerText = ''\n  } else {\n    $buttonCaption.innerText = $counter + ' vybraté'\n  }\n}\n\n/**\n * SearchResultsFilter handleSearchItemsFromInput handler\n *\n * @param {string} $type - type of filter\n * @param {object} e - Event\n */\nIdskSearchResultsFilter.prototype.handleSearchItemsFromInput = function ($type, e) {\n  var $el = e.target || e.srcElement\n  var $linkPanelButton = $el.closest('.idsk-search-results__link-panel')\n  var $items = $linkPanelButton.querySelectorAll('.govuk-' + $type + '__item')\n  $items.forEach(\n    function ($item) {\n      $item.classList.remove('idsk-search-results--invisible')\n    }.bind(this)\n  )\n  $items.forEach(\n    function ($item) {\n      var $labelItem = $item.querySelector('.govuk-' + $type + '__label')\n\n      if (\n        !$labelItem.innerText.toLowerCase().includes($el.value.toLowerCase())\n      ) {\n        $item.classList.add('idsk-search-results--invisible')\n      }\n    }.bind(this)\n  )\n}\n\n/**\n * An event handler for click event on $linkPanel - collapse or expand filter\n *\n * @param {object} e - Event\n */\nIdskSearchResultsFilter.prototype.handleClickLinkPanel = function (e) {\n  var $el = e.target || e.srcElement\n  var $linkPanelButton = $el.closest('.idsk-search-results__link-panel')\n  var $contentPanel = $linkPanelButton.querySelector(\n    '.idsk-search-results__list'\n  )\n  var $ariaLabelComponent = $el.closest(\n    '.idsk-search-results__link-panel-button'\n  )\n\n  toggleClass($contentPanel, 'idsk-search-results--hidden')\n  toggleClass($linkPanelButton, 'idsk-search-results--expand')\n  if ($linkPanelButton.classList.contains('idsk-search-results--expand')) {\n    $ariaLabelComponent.setAttribute('aria-expanded', 'true')\n    $ariaLabelComponent.setAttribute(\n      'aria-label',\n      $ariaLabelComponent.getAttribute('data-text-for-hide')\n    )\n  } else {\n    $ariaLabelComponent.setAttribute('aria-expanded', 'false')\n    $ariaLabelComponent.setAttribute(\n      'aria-label',\n      $ariaLabelComponent.getAttribute('data-text-for-show')\n    )\n  }\n}\n\nexport default IdskSearchResultsFilter\n"],"names":[],"mappings":"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"}