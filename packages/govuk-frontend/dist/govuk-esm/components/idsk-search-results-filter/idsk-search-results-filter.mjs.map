{"version":3,"file":"idsk-search-results-filter.mjs","sources":["../../../../src/govuk/components/idsk-search-results-filter/idsk-search-results-filter.mjs"],"sourcesContent":["/* eslint-disable */\n\nimport { toggleClass } from '../../common.mjs'\n\n/**\n * SearchResultsFilter component\n *\n * @param {object} $module - The module to enhance\n */\nfunction IdskSearchResultsFilter ($module) {\n  this.$module = $module\n}\n\n/**\n * SearchResultsFilter init function\n */\nIdskSearchResultsFilter.prototype.init = function () {\n  // Check for module\n  var $module = this.$module\n  if (!$module) {\n    return\n  }\n\n  var $linkPanelButtons = $module.querySelectorAll(\n    '.idsk-search-results__link-panel-button'\n  )\n  if (!$linkPanelButtons) {\n    return\n  }\n\n  var $topicSearchInput = $module.querySelector('#idsk-search-input__topic')\n  if ($topicSearchInput) {\n    $topicSearchInput.addEventListener(\n      'keyup',\n      this.handleSearchItemsFromInput.bind(this, 'radios')\n    )\n  }\n\n  var $subtopicSearchInput = $module.querySelector(\n    '#idsk-search-input__subtopic'\n  )\n  if ($subtopicSearchInput) {\n    $subtopicSearchInput.addEventListener(\n      'keyup',\n      this.handleSearchItemsFromInput.bind(this, 'radios')\n    )\n  }\n\n  var $contentTypeSearchInput = $module.querySelector(\n    '#idsk-search-input__content-type'\n  )\n  if ($contentTypeSearchInput) {\n    $contentTypeSearchInput.addEventListener(\n      'keyup',\n      this.handleSearchItemsFromInput.bind(this, 'checkboxes')\n    )\n  }\n\n  var $radioButtonsInput = $module.querySelectorAll(\n    '.idsk-search-results__filter .govuk-radios__input '\n  )\n  if (!$radioButtonsInput) {\n    return\n  }\n\n  var $contentTypeCheckBoxes = $module.querySelectorAll(\n    '.idsk-search-results__filter .govuk-checkboxes__input '\n  )\n  if (!$contentTypeCheckBoxes) {\n    return\n  }\n\n  $radioButtonsInput.forEach(\n    function ($input) {\n      $input.addEventListener(\n        'click',\n        this.handleClickRadioButton.bind(this),\n        true\n      )\n    }.bind(this)\n  )\n\n  $contentTypeCheckBoxes.forEach(\n    function ($checkBox) {\n      $checkBox.addEventListener(\n        'click',\n        this.handleClickContentTypeCheckBox.bind(this),\n        true\n      )\n    }.bind(this)\n  )\n\n  $linkPanelButtons.forEach(\n    function ($button) {\n      $button.addEventListener('click', this.handleClickLinkPanel.bind(this))\n    }.bind(this)\n  )\n}\n\n/**\n * SearchResultsFilter handleClickRadioButton handler\n *\n * @param {object} e - Event\n */\nIdskSearchResultsFilter.prototype.handleClickRadioButton = function (e) {\n  var $el = e.target || e.srcElement\n  var $linkPanelButton = $el.closest('.idsk-search-results__link-panel')\n  var $buttonCaption = $linkPanelButton.querySelector(\n    '.idsk-search-results__link-panel--span'\n  )\n\n  $buttonCaption.innerText = '1 vybraté'\n}\n\n/**\n * SearchResultsFilter handleClickContentTypeCheckBox handler\n *\n * @param {object} e - Event\n */\nIdskSearchResultsFilter.prototype.handleClickContentTypeCheckBox = function (e) {\n  var $el = e.target || e.srcElement\n  var $linkPanelButton = $el.closest('.idsk-search-results__link-panel')\n  var $checkBoxes = $el.closest('.govuk-checkboxes')\n\n  this.handleCountOfPickedContentTypes.call(this, $checkBoxes, $linkPanelButton)\n}\n\n/**\n * SearchResultsFilter handleCountOfPickedContentTypes handler\n *\n * @param {object} $checkBoxes - checkboxes element\n * @param {object} $linkPanelButton - link panel button element\n */\nIdskSearchResultsFilter.prototype.handleCountOfPickedContentTypes = function (\n  $checkBoxes,\n  $linkPanelButton\n) {\n  var $buttonCaption = $linkPanelButton.querySelector(\n    '.idsk-search-results__link-panel--span'\n  )\n  var $counter = 0\n\n  if ($checkBoxes) {\n    $checkBoxes.querySelectorAll('.govuk-checkboxes__input').forEach(\n      function ($checkBox) {\n        if ($checkBox.checked) {\n          $counter = $counter + 1\n        }\n      }.bind(this)\n    )\n  }\n  if ($counter === 0) {\n    $buttonCaption.innerText = ''\n  } else {\n    $buttonCaption.innerText = $counter + ' vybraté'\n  }\n}\n\n/**\n * SearchResultsFilter handleSearchItemsFromInput handler\n *\n * @param {string} $type - type of filter\n * @param {object} e - Event\n */\nIdskSearchResultsFilter.prototype.handleSearchItemsFromInput = function ($type, e) {\n  var $el = e.target || e.srcElement\n  var $linkPanelButton = $el.closest('.idsk-search-results__link-panel')\n  var $items = $linkPanelButton.querySelectorAll('.govuk-' + $type + '__item')\n  $items.forEach(\n    function ($item) {\n      $item.classList.remove('idsk-search-results--invisible')\n    }.bind(this)\n  )\n  $items.forEach(\n    function ($item) {\n      var $labelItem = $item.querySelector('.govuk-' + $type + '__label')\n\n      if (\n        !$labelItem.innerText.toLowerCase().includes($el.value.toLowerCase())\n      ) {\n        $item.classList.add('idsk-search-results--invisible')\n      }\n    }.bind(this)\n  )\n}\n\n/**\n * An event handler for click event on $linkPanel - collapse or expand filter\n *\n * @param {object} e - Event\n */\nIdskSearchResultsFilter.prototype.handleClickLinkPanel = function (e) {\n  var $el = e.target || e.srcElement\n  var $linkPanelButton = $el.closest('.idsk-search-results__link-panel')\n  var $contentPanel = $linkPanelButton.querySelector(\n    '.idsk-search-results__list'\n  )\n  var $ariaLabelComponent = $el.closest(\n    '.idsk-search-results__link-panel-button'\n  )\n\n  toggleClass($contentPanel, 'idsk-search-results--hidden')\n  toggleClass($linkPanelButton, 'idsk-search-results--expand')\n  if ($linkPanelButton.classList.contains('idsk-search-results--expand')) {\n    $ariaLabelComponent.setAttribute('aria-expanded', 'true')\n    $ariaLabelComponent.setAttribute(\n      'aria-label',\n      $ariaLabelComponent.getAttribute('data-text-for-hide')\n    )\n  } else {\n    $ariaLabelComponent.setAttribute('aria-expanded', 'false')\n    $ariaLabelComponent.setAttribute(\n      'aria-label',\n      $ariaLabelComponent.getAttribute('data-text-for-show')\n    )\n  }\n}\n\nexport default IdskSearchResultsFilter\n"],"names":[],"mappings":"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"}