{"version":3,"file":"idsk-interactive-map.js","sources":["../../../../src/govuk/components/idsk-interactive-map/idsk-interactive-map.mjs"],"sourcesContent":["/* eslint-disable */\n\n/**\n * InteractiveMap Component\n *\n * @param {object} $module - HTML element to use for interactive map\n */\nfunction IdskInteractiveMap ($module) {\n  this.$module = $module\n  this.$currentData = null\n  this.$currentMode = ''\n}\n\n/**\n * InteractiveMap init function\n */\nIdskInteractiveMap.prototype.init = function () {\n  // Check for module\n  var $module = this.$module\n  if (!$module) {\n    return\n  }\n\n  var $radioMap = $module.querySelector('.idsk-intereactive-map__radio-map')\n  if ($radioMap) {\n    $radioMap.addEventListener(\n      'click',\n      this.handleRadioButtonModeClick.bind(this, 'map')\n    )\n  }\n\n  var $radioTable = $module.querySelector('.idsk-intereactive-map__radio-table')\n  if ($radioTable) {\n    $radioTable.addEventListener(\n      'click',\n      this.handleRadioButtonModeClick.bind(this, 'table')\n    )\n  }\n\n  var $selectTimePeriod = $module.querySelector(\n    '.idsk-interactive-map__select-time-period'\n  )\n  if ($selectTimePeriod) {\n    $selectTimePeriod.addEventListener('change', this.renderData.bind(this))\n  }\n\n  var $selectIndicator = $module.querySelector(\n    '.idsk-interactive-map__select-indicator'\n  )\n  if ($selectIndicator) {\n    $selectIndicator.addEventListener('change', this.renderData.bind(this))\n  }\n\n  var $radioBtn = $module.querySelector('.govuk-radios__input')\n  var $radiosName = $radioBtn.getAttribute('name')\n  var $selectedControlOption = $module.querySelector(\n    'input[name=\"' + $radiosName + '\"]:checked'\n  ).value\n  this.handleRadioButtonModeClick($selectedControlOption)\n  this.renderData()\n}\n\n/**\n * InteractiveMap handleRadioButtonModeClick handler\n */\nIdskInteractiveMap.prototype.handleRadioButtonModeClick = function (type) {\n  var $type = type\n  var $module = this.$module\n\n  if (this.$currentMode === $type) {\n    return\n  }\n\n  this.$currentMode = $type\n\n  if ($type === 'table') {\n    $module.querySelector('.idsk-interactive-map__table').style.display =\n      'block'\n    $module.querySelector('.idsk-interactive-map__map').style.display = 'none'\n  } else if ($type === 'map') {\n    $module.querySelector('.idsk-interactive-map__map').style.display = 'block'\n    $module.querySelector('.idsk-interactive-map__table').style.display = 'none'\n    $module.querySelector('.idsk-interactive-map__map-iframe').src += '' // reload content - reset map boundaries\n  }\n}\n\n/**\n * InteractiveMap renderData handler\n */\nIdskInteractiveMap.prototype.renderData = function () {\n  var $module = this.$module\n  var $tableEl = $module.querySelector('.idsk-interactive-map__table-iframe')\n  var $tableSrc = $tableEl.dataset.src\n  var $mapEl = $module.querySelector('.idsk-interactive-map__map-iframe')\n  var $mapSrc = $mapEl.dataset.src\n  var $timePeriodSelect = $module.querySelector(\n    '.idsk-interactive-map__select-time-period'\n  )\n  var $timePeriodValue =\n    $timePeriodSelect.options[$timePeriodSelect.selectedIndex].value\n  var $timePeriod =\n    $timePeriodSelect.options[$timePeriodSelect.selectedIndex].text\n  var $indicatorSelect = $module.querySelector(\n    '.idsk-interactive-map__select-indicator'\n  )\n\n  if ($indicatorSelect) {\n    var $indicatorValue =\n      $indicatorSelect.options[$indicatorSelect.selectedIndex].value\n    var $indicatorText =\n      $indicatorSelect.options[$indicatorSelect.selectedIndex].text\n\n    $module.querySelector(\n      '.idsk-interactive-map__current-indicator'\n    ).innerText = $indicatorText\n    $module.querySelector(\n      '.idsk-interactive-map__current-time-period'\n    ).innerText = $timePeriod\n  }\n\n  $mapEl.src =\n    $mapSrc + '?indicator=' + $indicatorValue + '&time=' + $timePeriodValue\n  $tableEl.src =\n    $tableSrc + '?indicator=' + $indicatorValue + '&time=' + $timePeriodValue\n}\n\nexport default IdskInteractiveMap\n"],"names":[],"mappings":"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"}