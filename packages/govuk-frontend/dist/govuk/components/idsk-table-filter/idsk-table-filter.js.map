{"version":3,"file":"idsk-table-filter.js","sources":["../../../../src/govuk/common/index.mjs","../../../../src/govuk/common.mjs","../../../../src/govuk/components/idsk-table-filter/idsk-table-filter.mjs"],"sourcesContent":["/**\n * Common helpers which do not require polyfill.\n *\n * IMPORTANT: If a helper require a polyfill, please isolate it in its own module\n * so that the polyfill can be properly tree-shaken and does not burden\n * the components that do not need that helper\n *\n * @module common/index\n */\n\n/**\n * Used to generate a unique string, allows multiple instances of the component\n * without them conflicting with each other.\n * https://stackoverflow.com/a/8809472\n *\n * @deprecated Will be made private in v5.0\n * @returns {string} Unique ID\n */\nexport function generateUniqueID () {\n  var d = new Date().getTime()\n  if (typeof window.performance !== 'undefined' && typeof window.performance.now === 'function') {\n    d += window.performance.now() // use high-precision timer if available\n  }\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n    var r = (d + Math.random() * 16) % 16 | 0\n    d = Math.floor(d / 16)\n    return (c === 'x' ? r : (r & 0x3 | 0x8)).toString(16)\n  })\n}\n\n/**\n * Config flattening function\n *\n * Takes any number of objects, flattens them into namespaced key-value pairs,\n * (e.g. \\{'i18n.showSection': 'Show section'\\}) and combines them together, with\n * greatest priority on the LAST item passed in.\n *\n * @deprecated Will be made private in v5.0\n * @returns {{ [key: string]: unknown }} A flattened object of key-value pairs.\n */\nexport function mergeConfigs (/* configObject1, configObject2, ...configObjects */) {\n  /**\n   * Function to take nested objects and flatten them to a dot-separated keyed\n   * object. Doing this means we don't need to do any deep/recursive merging of\n   * each of our objects, nor transform our dataset from a flat list into a\n   * nested object.\n   *\n   * @param {{ [key: string]: unknown }} configObject - Deeply nested object\n   * @returns {{ [key: string]: unknown }} Flattened object with dot-separated keys\n   */\n  var flattenObject = function (configObject) {\n    // Prepare an empty return object\n    /** @type {{ [key: string]: unknown }} */\n    var flattenedObject = {}\n\n    /**\n     * Our flattening function, this is called recursively for each level of\n     * depth in the object. At each level we prepend the previous level names to\n     * the key using `prefix`.\n     *\n     * @param {Partial<{ [key: string]: unknown }>} obj - Object to flatten\n     * @param {string} [prefix] - Optional dot-separated prefix\n     */\n    var flattenLoop = function (obj, prefix) {\n      // Loop through keys...\n      for (var key in obj) {\n        // Check to see if this is a prototypical key/value,\n        // if it is, skip it.\n        if (!Object.prototype.hasOwnProperty.call(obj, key)) {\n          continue\n        }\n        var value = obj[key]\n        var prefixedKey = prefix ? prefix + '.' + key : key\n        if (typeof value === 'object') {\n          // If the value is a nested object, recurse over that too\n          flattenLoop(value, prefixedKey)\n        } else {\n          // Otherwise, add this value to our return object\n          flattenedObject[prefixedKey] = value\n        }\n      }\n    }\n\n    // Kick off the recursive loop\n    flattenLoop(configObject)\n    return flattenedObject\n  }\n\n  // Start with an empty object as our base\n  /** @type {{ [key: string]: unknown }} */\n  var formattedConfigObject = {}\n\n  // Loop through each of the remaining passed objects and push their keys\n  // one-by-one into configObject. Any duplicate keys will override the existing\n  // key with the new value.\n  for (var i = 0; i < arguments.length; i++) {\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-argument -- Ignore mismatch between arguments types\n    var obj = flattenObject(arguments[i])\n    for (var key in obj) {\n      if (Object.prototype.hasOwnProperty.call(obj, key)) {\n        formattedConfigObject[key] = obj[key]\n      }\n    }\n  }\n\n  return formattedConfigObject\n}\n\n/**\n * Extracts keys starting with a particular namespace from a flattened config\n * object, removing the namespace in the process.\n *\n * @deprecated Will be made private in v5.0\n * @param {{ [key: string]: unknown }} configObject - The object to extract key-value pairs from.\n * @param {string} namespace - The namespace to filter keys with.\n * @returns {{ [key: string]: unknown }} Flattened object with dot-separated key namespace removed\n * @throws {Error} Config object required\n * @throws {Error} Namespace string required\n */\nexport function extractConfigByNamespace (configObject, namespace) {\n  // Check we have what we need\n  if (!configObject || typeof configObject !== 'object') {\n    throw new Error('Provide a `configObject` of type \"object\".')\n  }\n\n  if (!namespace || typeof namespace !== 'string') {\n    throw new Error('Provide a `namespace` of type \"string\" to filter the `configObject` by.')\n  }\n\n  /** @type {{ [key: string]: unknown }} */\n  var newObject = {}\n\n  for (var key in configObject) {\n    // Split the key into parts, using . as our namespace separator\n    var keyParts = key.split('.')\n    // Check if the first namespace matches the configured namespace\n    if (Object.prototype.hasOwnProperty.call(configObject, key) && keyParts[0] === namespace) {\n      // Remove the first item (the namespace) from the parts array,\n      // but only if there is more than one part (we don't want blank keys!)\n      if (keyParts.length > 1) {\n        keyParts.shift()\n      }\n      // Join the remaining parts back together\n      var newKey = keyParts.join('.')\n      // Add them to our new object\n      newObject[newKey] = configObject[key]\n    }\n  }\n  return newObject\n}\n\n/**\n * Toggle class\n *\n * @param {object} node - element\n * @param {string} className - to toggle\n */\nexport function toggleClass (node, className) {\n  if (node === null) {\n    return\n  }\n\n  if (node.className.indexOf(className) > 0) {\n    node.className = node.className.replace(' ' + className, '')\n  } else {\n    node.className += ' ' + className\n  }\n}\n","// Implementation of common function is gathered in the `common` folder\n// as some are split in their own modules to limit impacts of the polyfills\n// they require.\n// This module exports the non polyfilled methods as they used to be\n// to avoid breaking changes\nexport * from './common/index.mjs'\n","/* eslint-disable */\n\nimport { toggleClass } from '../../common.mjs'\n\n/**\n * TableFilter\n *\n * @param {object} $module - The module to enhance\n */\nfunction IdskTableFilter ($module) {\n  this.$module = $module\n  this.selectedFitlersCount = 0\n  this.$activeFilters = []\n\n  // get texts\n  this.removeAllFiltersText = $module.querySelector(\n    '.idsk-table-filter__active-filters'\n  ).dataset.removeAllFilters\n  this.removeFilterText = $module.querySelector(\n    '.idsk-table-filter__active-filters'\n  ).dataset.removeFilter\n}\n\n/**\n * TableFilter init function\n */\nIdskTableFilter.prototype.init = function () {\n  // Check for module\n  var $module = this.$module\n  if (!$module) {\n    return\n  }\n\n  // button to toggle content\n  var $toggleButtons = $module.querySelectorAll('.idsk-filter-menu__toggle')\n\n  // Form with all inputs and selects\n  var $form = $module.querySelector('form')\n\n  // all inputs for count of selected filters\n  var $filterInputs = $module.querySelectorAll('.govuk-input, .govuk-select')\n\n  $toggleButtons.forEach(\n    function ($button) {\n      $button.addEventListener('click', this.handleClickTogglePanel.bind(this))\n    }.bind(this)\n  )\n\n  if ($form) {\n    $form.addEventListener(\n      'submit',\n      function (e) {\n        e.preventDefault()\n        this.handleSubmitFilter(this)\n      }.bind(this)\n    )\n  }\n\n  $filterInputs.forEach(\n    function ($input) {\n      // for selects\n      $input.addEventListener('change', this.handleFilterValueChange.bind(this))\n      // for text inputs\n      $input.addEventListener(\n        'keyup',\n        function (e) {\n          // submit if key is enter else change count of used filters\n          if (e.key === 'Enter') {\n            // send event like this, because submitting form will be ignored if fields are empty\n            this.sendSubmitEvent()\n          } else {\n            this.handleFilterValueChange(e)\n          }\n        }.bind(this)\n      )\n    }.bind(this)\n  )\n\n  // recalculate height of all expanded panels on window resize\n  window.addEventListener('resize', this.handleWindowResize.bind(this))\n}\n/**\n * Forcing submit event for form\n */\nIdskTableFilter.prototype.sendSubmitEvent = function () {\n  this.$module.querySelector('form').dispatchEvent(\n    new Event('submit', {\n      bubbles: true,\n      cancelable: true\n    })\n  )\n}\n\n/**\n * An event handler for click event on $togglePanel - collapse or expand table-filter\n *\n * @param {object} e - Event\n */\nIdskTableFilter.prototype.handleClickTogglePanel = function (e) {\n  var $el = e.target || e.srcElement\n  var $expandablePanel = $el.parentNode\n  var $content = $el.nextElementSibling\n\n  // get texts from button dataset\n  var openText = $el.dataset.openText\n  var closeText = $el.dataset.closeText\n\n  // if panel is category, change size of whole panel with animation\n  var isCategory = $expandablePanel.classList.contains(\n    'idsk-table-filter__category'\n  )\n  if (isCategory) {\n    var $categoryParent = $expandablePanel.parentNode\n\n    // made more fluid animations for changed spacing with transition\n    var marginBottomTitle = isCategory ? 18 : 20\n    var marginBottomExpandedCategory = 25\n    var newParentHeight =\n      $content.style.height && $content.style.height !== '0px'\n        ? parseInt($categoryParent.style.height) -\n          $content.scrollHeight -\n          marginBottomTitle +\n          marginBottomExpandedCategory\n        : parseInt($categoryParent.style.height) +\n          $content.scrollHeight +\n          marginBottomTitle -\n          marginBottomExpandedCategory\n\n    $categoryParent.style.height = newParentHeight + 'px'\n  }\n\n  // show element after toggle with slide down animation\n  toggleClass($expandablePanel, 'idsk-table-filter--expanded')\n  $content.style.height =\n    ($content.style.height && $content.style.height !== '0px'\n      ? '0'\n      : $content.scrollHeight) + 'px'\n\n  // set text for toggle\n  var hidden = $content.style.height === '0px'\n  var newToggleText = hidden ? openText : closeText\n  var newToggleButton = hidden ? 'false' : 'true'\n  var $ariaToggleForm = document.querySelector('.idsk-table-filter__content')\n  $el.innerHTML = newToggleText\n  $el.setAttribute(\n    'aria-label',\n    newToggleText +\n      ($el.dataset.categoryName ? ' ' + $el.dataset.categoryName : '')\n  )\n  $ariaToggleForm.setAttribute('aria-hidden', newToggleButton)\n\n  // toggle tabbable if content is shown or not\n  var $items = $content.querySelectorAll(\n    ':scope > .idsk-table-filter__filter-inputs input, :scope > .idsk-table-filter__filter-inputs select, .idsk-filter-menu__toggle'\n  )\n  var tabIndex = hidden ? -1 : 0\n  $items.forEach(function ($filter) {\n    // @ts-ignore\n    $filter.tabIndex = tabIndex\n  })\n}\n\n/**\n * A function to remove filter from active filters\n *\n * @param {object} $filterToRemove - filter to remove\n */\nIdskTableFilter.prototype.removeActiveFilter = function ($filterToRemove) {\n  var $filterToRemoveValue = this.$module.querySelector(\n    '.govuk-input[name=\"' +\n      $filterToRemove.name +\n      '\"], .govuk-select[name=\"' +\n      $filterToRemove.name +\n      '\"]'\n  )\n  if ($filterToRemoveValue.tagName === 'SELECT') {\n    // if filter is select find option with empty value\n    $filterToRemoveValue\n      .querySelectorAll('option')\n      .forEach(function (option, index) {\n        if (option.value === '') {\n          $filterToRemoveValue.selectedIndex = index\n        }\n      })\n  } else $filterToRemoveValue.value = ''\n\n  // simulate change event of inputs to change count of active filters and call form submit to send information about filter was changed\n  $filterToRemoveValue.dispatchEvent(new Event('change'))\n\n  // send submit event of form to call data changes\n  this.sendSubmitEvent()\n\n  this.$activeFilters = this.$activeFilters.filter(function ($filter) {\n    return $filter.id !== $filterToRemove.id\n  })\n\n  this.renderActiveFilters()\n}\n\n/**\n * A function to remove all active filters\n */\nIdskTableFilter.prototype.removeAllActiveFilters = function () {\n  this.$activeFilters.forEach(\n    function ($filter) {\n      this.removeActiveFilter($filter)\n    }.bind(this)\n  )\n}\n\n/**\n * A function to add elements to DOM object\n */\nIdskTableFilter.prototype.renderActiveFilters = function () {\n  // remove all existing filters from array\n  var $activeFiltersPanel = this.$module.querySelector(\n    '.idsk-table-filter__active-filters'\n  )\n  var $activeFilters = $activeFiltersPanel.querySelector(\n    '.idsk-table-filter__active-filters .idsk-table-filter__content'\n  )\n  $activeFilters.innerHTML = ''\n\n  // open filter if active filters was hidden before\n  if (\n    $activeFiltersPanel.classList.contains(\n      'idsk-table-filter__active-filters__hide'\n    )\n  ) {\n    $activeFiltersPanel.classList.add('idsk-table-filter--expanded')\n  }\n\n  // render all filters in active filters\n  this.$activeFilters.forEach(\n    function ($filter) {\n      var $activeFilter = document.createElement('div')\n      $activeFilter.classList.add('idsk-table-filter__parameter', 'govuk-body')\n      var $removeFilterBtn =\n        '<button class=\"idsk-table-filter__parameter-remove\" tabindex=\"0\">✕ <span class=\"govuk-visually-hidden\">' +\n        this.removeFilterText +\n        ' ' +\n        $filter.value +\n        '</span></button>'\n      $activeFilter.innerHTML =\n        '<span class=\"idsk-table-filter__parameter-title\">' +\n        $filter.value +\n        '</span>' +\n        $removeFilterBtn\n\n      $activeFilter\n        .querySelector('.idsk-table-filter__parameter-remove')\n        .addEventListener(\n          'click',\n          function () {\n            this.removeActiveFilter($filter)\n          }.bind(this)\n        )\n\n      $activeFilters.appendChild($activeFilter)\n    }.bind(this)\n  )\n\n  // add remove everything button if some filter is activated else print none filter is activated\n  if (this.$activeFilters.length > 0) {\n    $activeFiltersPanel.classList.remove(\n      'idsk-table-filter__active-filters__hide'\n    )\n    var $removeAllFilters = document.createElement('button')\n    $removeAllFilters.classList.add('govuk-body', 'govuk-link')\n    $removeAllFilters.innerHTML =\n      '<span class=\"idsk-table-filter__parameter-title\">' +\n      this.removeAllFiltersText +\n      ' (' +\n      this.$activeFilters.length +\n      ')</span><span class=\"idsk-table-filter__parameter-remove\">✕</span>'\n    $removeAllFilters.addEventListener(\n      'click',\n      this.removeAllActiveFilters.bind(this)\n    )\n    $activeFilters.appendChild($removeAllFilters)\n  } else {\n    $activeFiltersPanel.classList.add('idsk-table-filter__active-filters__hide')\n  }\n\n  // calc height of 'active filter' panel if panel is expanded\n  var $activeFiltersContainer = this.$module.querySelector(\n    '.idsk-table-filter__active-filters.idsk-table-filter--expanded .idsk-table-filter__content'\n  )\n  if ($activeFiltersContainer) {\n    $activeFiltersContainer.style.height = 'initial' // to changing height from initial height\n    $activeFiltersContainer.style.height =\n      $activeFiltersContainer.scrollHeight + 'px'\n  }\n}\n\n/**\n * A function to refresh number of selected filters count\n */\nIdskTableFilter.prototype.renderSelectedFiltersCount = function () {\n  var submitButton = this.$module.querySelector('.submit-table-filter')\n  submitButton.disabled = this.selectedFitlersCount === 0\n\n  var counter = submitButton.querySelector('.count')\n  counter.innerHTML = this.selectedFitlersCount\n}\n\n/**\n * A submit filters event on click at $submitButton or pressing enter in inputs\n */\nIdskTableFilter.prototype.handleSubmitFilter = function () {\n  // get all inputs and selects\n  var $inputs = this.$module.querySelectorAll(\n    '.idsk-table-filter__inputs input'\n  )\n  var $selects = this.$module.querySelectorAll(\n    '.idsk-table-filter__inputs select'\n  )\n\n  // add values of inputs to $activeFilters if it is not empty\n  this.$activeFilters = []\n  $inputs.forEach(\n    function ($input) {\n      if ($input.value.length > 0) {\n        this.$activeFilters.push({\n          id: $input.getAttribute('id'),\n          name: $input.getAttribute('name'),\n          value: $input.value\n        })\n      }\n    }.bind(this)\n  )\n\n  $selects.forEach(\n    function ($select) {\n      if ($select.value) {\n        this.$activeFilters.push({\n          id: $select.value,\n          name: $select.getAttribute('name'),\n          value: $select.options[$select.selectedIndex].text\n        })\n      }\n    }.bind(this)\n  )\n\n  // render all filters in active filters\n  this.renderActiveFilters()\n}\n\n/**\n * An event handler for on change event for all inputs and selects\n *\n * @param {object} e - event\n */\nIdskTableFilter.prototype.handleFilterValueChange = function (e) {\n  var $el = e.target || e.srcElement\n\n  // if filter is in category get count of selected filters only from that category\n  var $category = $el.closest('.idsk-table-filter__category')\n  if ($category) {\n    var $allCategoryFilters = $category.querySelectorAll(\n      '.idsk-table-filter__inputs input, .idsk-table-filter__inputs select'\n    )\n    var selectedCategoryFiltersCount = 0\n    $allCategoryFilters.forEach(function ($filter) {\n      if ($filter.value) {\n        selectedCategoryFiltersCount++\n      }\n    })\n    $category.querySelector('.count').innerHTML = selectedCategoryFiltersCount\n      ? '(' + selectedCategoryFiltersCount + ')'\n      : ''\n  }\n\n  // get count of all selected filters\n  this.selectedFitlersCount = 0\n  var $allFilters = this.$module.querySelectorAll(\n    '.idsk-table-filter__inputs input, .idsk-table-filter__inputs select'\n  )\n  $allFilters.forEach(\n    function ($filter) {\n      if ($filter.value) {\n        this.selectedFitlersCount++\n      }\n    }.bind(this)\n  )\n\n  // render count of selected filters\n  this.renderSelectedFiltersCount()\n}\n\n/**\n * An event handler for window resize to change elements based on scrollHeight\n */\nIdskTableFilter.prototype.handleWindowResize = function () {\n  var $allExpandedPanels = this.$module.querySelectorAll(\n    '.idsk-table-filter--expanded'\n  )\n  $allExpandedPanels.forEach(function ($panel) {\n    // @ts-ignore\n    var $content = $panel.querySelector('.idsk-table-filter__content')\n    $content.style.height = 'initial' // to changing height from initial height\n    $content.style.height = $content.scrollHeight + 'px'\n  })\n}\n\nexport default IdskTableFilter\n"],"names":[],"mappings":";;;;;;EAAA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;AACA,AA6IA;EACA;EACA;EACA;EACA;EACA;EACA;AACA,EAAO,SAAS,WAAW,EAAE,IAAI,EAAE,SAAS,EAAE;EAC9C,EAAE,IAAI,IAAI,KAAK,IAAI,EAAE;EACrB,IAAI,MAAM;EACV,GAAG;;EAEH,EAAE,IAAI,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,EAAE;EAC7C,IAAI,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,GAAG,GAAG,SAAS,EAAE,EAAE,EAAC;EAChE,GAAG,MAAM;EACT,IAAI,IAAI,CAAC,SAAS,IAAI,GAAG,GAAG,UAAS;EACrC,GAAG;EACH,CAAC;;ECvKD,uEAAuE;;ECAvE;AACA,AAEA;EACA;EACA;EACA;EACA;EACA;EACA,SAAS,eAAe,EAAE,OAAO,EAAE;EACnC,EAAE,IAAI,CAAC,OAAO,GAAG,QAAO;EACxB,EAAE,IAAI,CAAC,oBAAoB,GAAG,EAAC;EAC/B,EAAE,IAAI,CAAC,cAAc,GAAG,GAAE;;EAE1B;EACA,EAAE,IAAI,CAAC,oBAAoB,GAAG,OAAO,CAAC,aAAa;EACnD,IAAI,oCAAoC;EACxC,GAAG,CAAC,OAAO,CAAC,iBAAgB;EAC5B,EAAE,IAAI,CAAC,gBAAgB,GAAG,OAAO,CAAC,aAAa;EAC/C,IAAI,oCAAoC;EACxC,GAAG,CAAC,OAAO,CAAC,aAAY;EACxB,CAAC;;EAED;EACA;EACA;EACA,eAAe,CAAC,SAAS,CAAC,IAAI,GAAG,YAAY;EAC7C;EACA,EAAE,IAAI,OAAO,GAAG,IAAI,CAAC,QAAO;EAC5B,EAAE,IAAI,CAAC,OAAO,EAAE;EAChB,IAAI,MAAM;EACV,GAAG;;EAEH;EACA,EAAE,IAAI,cAAc,GAAG,OAAO,CAAC,gBAAgB,CAAC,2BAA2B,EAAC;;EAE5E;EACA,EAAE,IAAI,KAAK,GAAG,OAAO,CAAC,aAAa,CAAC,MAAM,EAAC;;EAE3C;EACA,EAAE,IAAI,aAAa,GAAG,OAAO,CAAC,gBAAgB,CAAC,6BAA6B,EAAC;;EAE7E,EAAE,cAAc,CAAC,OAAO;EACxB,IAAI,UAAU,OAAO,EAAE;EACvB,MAAM,OAAO,CAAC,gBAAgB,CAAC,OAAO,EAAE,IAAI,CAAC,sBAAsB,CAAC,IAAI,CAAC,IAAI,CAAC,EAAC;EAC/E,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC;EAChB,IAAG;;EAEH,EAAE,IAAI,KAAK,EAAE;EACb,IAAI,KAAK,CAAC,gBAAgB;EAC1B,MAAM,QAAQ;EACd,MAAM,UAAU,CAAC,EAAE;EACnB,QAAQ,CAAC,CAAC,cAAc,GAAE;EAC1B,QAAQ,IAAI,CAAC,kBAAkB,CAAC,IAAI,EAAC;EACrC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC;EAClB,MAAK;EACL,GAAG;;EAEH,EAAE,aAAa,CAAC,OAAO;EACvB,IAAI,UAAU,MAAM,EAAE;EACtB;EACA,MAAM,MAAM,CAAC,gBAAgB,CAAC,QAAQ,EAAE,IAAI,CAAC,uBAAuB,CAAC,IAAI,CAAC,IAAI,CAAC,EAAC;EAChF;EACA,MAAM,MAAM,CAAC,gBAAgB;EAC7B,QAAQ,OAAO;EACf,QAAQ,UAAU,CAAC,EAAE;EACrB;EACA,UAAU,IAAI,CAAC,CAAC,GAAG,KAAK,OAAO,EAAE;EACjC;EACA,YAAY,IAAI,CAAC,eAAe,GAAE;EAClC,WAAW,MAAM;EACjB,YAAY,IAAI,CAAC,uBAAuB,CAAC,CAAC,EAAC;EAC3C,WAAW;EACX,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC;EACpB,QAAO;EACP,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC;EAChB,IAAG;;EAEH;EACA,EAAE,MAAM,CAAC,gBAAgB,CAAC,QAAQ,EAAE,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,IAAI,CAAC,EAAC;EACvE,EAAC;EACD;EACA;EACA;EACA,eAAe,CAAC,SAAS,CAAC,eAAe,GAAG,YAAY;EACxD,EAAE,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC,aAAa;EAClD,IAAI,IAAI,KAAK,CAAC,QAAQ,EAAE;EACxB,MAAM,OAAO,EAAE,IAAI;EACnB,MAAM,UAAU,EAAE,IAAI;EACtB,KAAK,CAAC;EACN,IAAG;EACH,EAAC;;EAED;EACA;EACA;EACA;EACA;EACA,eAAe,CAAC,SAAS,CAAC,sBAAsB,GAAG,UAAU,CAAC,EAAE;EAChE,EAAE,IAAI,GAAG,GAAG,CAAC,CAAC,MAAM,IAAI,CAAC,CAAC,WAAU;EACpC,EAAE,IAAI,gBAAgB,GAAG,GAAG,CAAC,WAAU;EACvC,EAAE,IAAI,QAAQ,GAAG,GAAG,CAAC,mBAAkB;;EAEvC;EACA,EAAE,IAAI,QAAQ,GAAG,GAAG,CAAC,OAAO,CAAC,SAAQ;EACrC,EAAE,IAAI,SAAS,GAAG,GAAG,CAAC,OAAO,CAAC,UAAS;;EAEvC;EACA,EAAE,IAAI,UAAU,GAAG,gBAAgB,CAAC,SAAS,CAAC,QAAQ;EACtD,IAAI,6BAA6B;EACjC,IAAG;EACH,EAAE,IAAI,UAAU,EAAE;EAClB,IAAI,IAAI,eAAe,GAAG,gBAAgB,CAAC,WAAU;;EAErD;EACA,IAAI,IAAI,iBAAiB,GAAG,UAAU,GAAG,EAAE,GAAG,GAAE;EAChD,IAAI,IAAI,4BAA4B,GAAG,GAAE;EACzC,IAAI,IAAI,eAAe;EACvB,MAAM,QAAQ,CAAC,KAAK,CAAC,MAAM,IAAI,QAAQ,CAAC,KAAK,CAAC,MAAM,KAAK,KAAK;EAC9D,UAAU,QAAQ,CAAC,eAAe,CAAC,KAAK,CAAC,MAAM,CAAC;EAChD,UAAU,QAAQ,CAAC,YAAY;EAC/B,UAAU,iBAAiB;EAC3B,UAAU,4BAA4B;EACtC,UAAU,QAAQ,CAAC,eAAe,CAAC,KAAK,CAAC,MAAM,CAAC;EAChD,UAAU,QAAQ,CAAC,YAAY;EAC/B,UAAU,iBAAiB;EAC3B,UAAU,6BAA4B;;EAEtC,IAAI,eAAe,CAAC,KAAK,CAAC,MAAM,GAAG,eAAe,GAAG,KAAI;EACzD,GAAG;;EAEH;EACA,EAAE,WAAW,CAAC,gBAAgB,EAAE,6BAA6B,EAAC;EAC9D,EAAE,QAAQ,CAAC,KAAK,CAAC,MAAM;EACvB,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,MAAM,IAAI,QAAQ,CAAC,KAAK,CAAC,MAAM,KAAK,KAAK;EAC7D,QAAQ,GAAG;EACX,QAAQ,QAAQ,CAAC,YAAY,IAAI,KAAI;;EAErC;EACA,EAAE,IAAI,MAAM,GAAG,QAAQ,CAAC,KAAK,CAAC,MAAM,KAAK,MAAK;EAC9C,EAAE,IAAI,aAAa,GAAG,MAAM,GAAG,QAAQ,GAAG,UAAS;EACnD,EAAE,IAAI,eAAe,GAAG,MAAM,GAAG,OAAO,GAAG,OAAM;EACjD,EAAE,IAAI,eAAe,GAAG,QAAQ,CAAC,aAAa,CAAC,6BAA6B,EAAC;EAC7E,EAAE,GAAG,CAAC,SAAS,GAAG,cAAa;EAC/B,EAAE,GAAG,CAAC,YAAY;EAClB,IAAI,YAAY;EAChB,IAAI,aAAa;EACjB,OAAO,GAAG,CAAC,OAAO,CAAC,YAAY,GAAG,GAAG,GAAG,GAAG,CAAC,OAAO,CAAC,YAAY,GAAG,EAAE,CAAC;EACtE,IAAG;EACH,EAAE,eAAe,CAAC,YAAY,CAAC,aAAa,EAAE,eAAe,EAAC;;EAE9D;EACA,EAAE,IAAI,MAAM,GAAG,QAAQ,CAAC,gBAAgB;EACxC,IAAI,gIAAgI;EACpI,IAAG;EACH,EAAE,IAAI,QAAQ,GAAG,MAAM,GAAG,CAAC,CAAC,GAAG,EAAC;EAChC,EAAE,MAAM,CAAC,OAAO,CAAC,UAAU,OAAO,EAAE;EACpC;EACA,IAAI,OAAO,CAAC,QAAQ,GAAG,SAAQ;EAC/B,GAAG,EAAC;EACJ,EAAC;;EAED;EACA;EACA;EACA;EACA;EACA,eAAe,CAAC,SAAS,CAAC,kBAAkB,GAAG,UAAU,eAAe,EAAE;EAC1E,EAAE,IAAI,oBAAoB,GAAG,IAAI,CAAC,OAAO,CAAC,aAAa;EACvD,IAAI,qBAAqB;EACzB,MAAM,eAAe,CAAC,IAAI;EAC1B,MAAM,0BAA0B;EAChC,MAAM,eAAe,CAAC,IAAI;EAC1B,MAAM,IAAI;EACV,IAAG;EACH,EAAE,IAAI,oBAAoB,CAAC,OAAO,KAAK,QAAQ,EAAE;EACjD;EACA,IAAI,oBAAoB;EACxB,OAAO,gBAAgB,CAAC,QAAQ,CAAC;EACjC,OAAO,OAAO,CAAC,UAAU,MAAM,EAAE,KAAK,EAAE;EACxC,QAAQ,IAAI,MAAM,CAAC,KAAK,KAAK,EAAE,EAAE;EACjC,UAAU,oBAAoB,CAAC,aAAa,GAAG,MAAK;EACpD,SAAS;EACT,OAAO,EAAC;EACR,GAAG,MAAM,oBAAoB,CAAC,KAAK,GAAG,GAAE;;EAExC;EACA,EAAE,oBAAoB,CAAC,aAAa,CAAC,IAAI,KAAK,CAAC,QAAQ,CAAC,EAAC;;EAEzD;EACA,EAAE,IAAI,CAAC,eAAe,GAAE;;EAExB,EAAE,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,UAAU,OAAO,EAAE;EACtE,IAAI,OAAO,OAAO,CAAC,EAAE,KAAK,eAAe,CAAC,EAAE;EAC5C,GAAG,EAAC;;EAEJ,EAAE,IAAI,CAAC,mBAAmB,GAAE;EAC5B,EAAC;;EAED;EACA;EACA;EACA,eAAe,CAAC,SAAS,CAAC,sBAAsB,GAAG,YAAY;EAC/D,EAAE,IAAI,CAAC,cAAc,CAAC,OAAO;EAC7B,IAAI,UAAU,OAAO,EAAE;EACvB,MAAM,IAAI,CAAC,kBAAkB,CAAC,OAAO,EAAC;EACtC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC;EAChB,IAAG;EACH,EAAC;;EAED;EACA;EACA;EACA,eAAe,CAAC,SAAS,CAAC,mBAAmB,GAAG,YAAY;EAC5D;EACA,EAAE,IAAI,mBAAmB,GAAG,IAAI,CAAC,OAAO,CAAC,aAAa;EACtD,IAAI,oCAAoC;EACxC,IAAG;EACH,EAAE,IAAI,cAAc,GAAG,mBAAmB,CAAC,aAAa;EACxD,IAAI,gEAAgE;EACpE,IAAG;EACH,EAAE,cAAc,CAAC,SAAS,GAAG,GAAE;;EAE/B;EACA,EAAE;EACF,IAAI,mBAAmB,CAAC,SAAS,CAAC,QAAQ;EAC1C,MAAM,yCAAyC;EAC/C,KAAK;EACL,IAAI;EACJ,IAAI,mBAAmB,CAAC,SAAS,CAAC,GAAG,CAAC,6BAA6B,EAAC;EACpE,GAAG;;EAEH;EACA,EAAE,IAAI,CAAC,cAAc,CAAC,OAAO;EAC7B,IAAI,UAAU,OAAO,EAAE;EACvB,MAAM,IAAI,aAAa,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,EAAC;EACvD,MAAM,aAAa,CAAC,SAAS,CAAC,GAAG,CAAC,8BAA8B,EAAE,YAAY,EAAC;EAC/E,MAAM,IAAI,gBAAgB;EAC1B,QAAQ,yGAAyG;EACjH,QAAQ,IAAI,CAAC,gBAAgB;EAC7B,QAAQ,GAAG;EACX,QAAQ,OAAO,CAAC,KAAK;EACrB,QAAQ,mBAAkB;EAC1B,MAAM,aAAa,CAAC,SAAS;EAC7B,QAAQ,mDAAmD;EAC3D,QAAQ,OAAO,CAAC,KAAK;EACrB,QAAQ,SAAS;EACjB,QAAQ,iBAAgB;;EAExB,MAAM,aAAa;EACnB,SAAS,aAAa,CAAC,sCAAsC,CAAC;EAC9D,SAAS,gBAAgB;EACzB,UAAU,OAAO;EACjB,UAAU,YAAY;EACtB,YAAY,IAAI,CAAC,kBAAkB,CAAC,OAAO,EAAC;EAC5C,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC;EACtB,UAAS;;EAET,MAAM,cAAc,CAAC,WAAW,CAAC,aAAa,EAAC;EAC/C,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC;EAChB,IAAG;;EAEH;EACA,EAAE,IAAI,IAAI,CAAC,cAAc,CAAC,MAAM,GAAG,CAAC,EAAE;EACtC,IAAI,mBAAmB,CAAC,SAAS,CAAC,MAAM;EACxC,MAAM,yCAAyC;EAC/C,MAAK;EACL,IAAI,IAAI,iBAAiB,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,EAAC;EAC5D,IAAI,iBAAiB,CAAC,SAAS,CAAC,GAAG,CAAC,YAAY,EAAE,YAAY,EAAC;EAC/D,IAAI,iBAAiB,CAAC,SAAS;EAC/B,MAAM,mDAAmD;EACzD,MAAM,IAAI,CAAC,oBAAoB;EAC/B,MAAM,IAAI;EACV,MAAM,IAAI,CAAC,cAAc,CAAC,MAAM;EAChC,MAAM,qEAAoE;EAC1E,IAAI,iBAAiB,CAAC,gBAAgB;EACtC,MAAM,OAAO;EACb,MAAM,IAAI,CAAC,sBAAsB,CAAC,IAAI,CAAC,IAAI,CAAC;EAC5C,MAAK;EACL,IAAI,cAAc,CAAC,WAAW,CAAC,iBAAiB,EAAC;EACjD,GAAG,MAAM;EACT,IAAI,mBAAmB,CAAC,SAAS,CAAC,GAAG,CAAC,yCAAyC,EAAC;EAChF,GAAG;;EAEH;EACA,EAAE,IAAI,uBAAuB,GAAG,IAAI,CAAC,OAAO,CAAC,aAAa;EAC1D,IAAI,4FAA4F;EAChG,IAAG;EACH,EAAE,IAAI,uBAAuB,EAAE;EAC/B,IAAI,uBAAuB,CAAC,KAAK,CAAC,MAAM,GAAG,UAAS;EACpD,IAAI,uBAAuB,CAAC,KAAK,CAAC,MAAM;EACxC,MAAM,uBAAuB,CAAC,YAAY,GAAG,KAAI;EACjD,GAAG;EACH,EAAC;;EAED;EACA;EACA;EACA,eAAe,CAAC,SAAS,CAAC,0BAA0B,GAAG,YAAY;EACnE,EAAE,IAAI,YAAY,GAAG,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,sBAAsB,EAAC;EACvE,EAAE,YAAY,CAAC,QAAQ,GAAG,IAAI,CAAC,oBAAoB,KAAK,EAAC;;EAEzD,EAAE,IAAI,OAAO,GAAG,YAAY,CAAC,aAAa,CAAC,QAAQ,EAAC;EACpD,EAAE,OAAO,CAAC,SAAS,GAAG,IAAI,CAAC,qBAAoB;EAC/C,EAAC;;EAED;EACA;EACA;EACA,eAAe,CAAC,SAAS,CAAC,kBAAkB,GAAG,YAAY;EAC3D;EACA,EAAE,IAAI,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,gBAAgB;EAC7C,IAAI,kCAAkC;EACtC,IAAG;EACH,EAAE,IAAI,QAAQ,GAAG,IAAI,CAAC,OAAO,CAAC,gBAAgB;EAC9C,IAAI,mCAAmC;EACvC,IAAG;;EAEH;EACA,EAAE,IAAI,CAAC,cAAc,GAAG,GAAE;EAC1B,EAAE,OAAO,CAAC,OAAO;EACjB,IAAI,UAAU,MAAM,EAAE;EACtB,MAAM,IAAI,MAAM,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,EAAE;EACnC,QAAQ,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC;EACjC,UAAU,EAAE,EAAE,MAAM,CAAC,YAAY,CAAC,IAAI,CAAC;EACvC,UAAU,IAAI,EAAE,MAAM,CAAC,YAAY,CAAC,MAAM,CAAC;EAC3C,UAAU,KAAK,EAAE,MAAM,CAAC,KAAK;EAC7B,SAAS,EAAC;EACV,OAAO;EACP,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC;EAChB,IAAG;;EAEH,EAAE,QAAQ,CAAC,OAAO;EAClB,IAAI,UAAU,OAAO,EAAE;EACvB,MAAM,IAAI,OAAO,CAAC,KAAK,EAAE;EACzB,QAAQ,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC;EACjC,UAAU,EAAE,EAAE,OAAO,CAAC,KAAK;EAC3B,UAAU,IAAI,EAAE,OAAO,CAAC,YAAY,CAAC,MAAM,CAAC;EAC5C,UAAU,KAAK,EAAE,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC,IAAI;EAC5D,SAAS,EAAC;EACV,OAAO;EACP,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC;EAChB,IAAG;;EAEH;EACA,EAAE,IAAI,CAAC,mBAAmB,GAAE;EAC5B,EAAC;;EAED;EACA;EACA;EACA;EACA;EACA,eAAe,CAAC,SAAS,CAAC,uBAAuB,GAAG,UAAU,CAAC,EAAE;EACjE,EAAE,IAAI,GAAG,GAAG,CAAC,CAAC,MAAM,IAAI,CAAC,CAAC,WAAU;;EAEpC;EACA,EAAE,IAAI,SAAS,GAAG,GAAG,CAAC,OAAO,CAAC,8BAA8B,EAAC;EAC7D,EAAE,IAAI,SAAS,EAAE;EACjB,IAAI,IAAI,mBAAmB,GAAG,SAAS,CAAC,gBAAgB;EACxD,MAAM,qEAAqE;EAC3E,MAAK;EACL,IAAI,IAAI,4BAA4B,GAAG,EAAC;EACxC,IAAI,mBAAmB,CAAC,OAAO,CAAC,UAAU,OAAO,EAAE;EACnD,MAAM,IAAI,OAAO,CAAC,KAAK,EAAE;EACzB,QAAQ,4BAA4B,GAAE;EACtC,OAAO;EACP,KAAK,EAAC;EACN,IAAI,SAAS,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC,SAAS,GAAG,4BAA4B;EAC9E,QAAQ,GAAG,GAAG,4BAA4B,GAAG,GAAG;EAChD,QAAQ,GAAE;EACV,GAAG;;EAEH;EACA,EAAE,IAAI,CAAC,oBAAoB,GAAG,EAAC;EAC/B,EAAE,IAAI,WAAW,GAAG,IAAI,CAAC,OAAO,CAAC,gBAAgB;EACjD,IAAI,qEAAqE;EACzE,IAAG;EACH,EAAE,WAAW,CAAC,OAAO;EACrB,IAAI,UAAU,OAAO,EAAE;EACvB,MAAM,IAAI,OAAO,CAAC,KAAK,EAAE;EACzB,QAAQ,IAAI,CAAC,oBAAoB,GAAE;EACnC,OAAO;EACP,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC;EAChB,IAAG;;EAEH;EACA,EAAE,IAAI,CAAC,0BAA0B,GAAE;EACnC,EAAC;;EAED;EACA;EACA;EACA,eAAe,CAAC,SAAS,CAAC,kBAAkB,GAAG,YAAY;EAC3D,EAAE,IAAI,kBAAkB,GAAG,IAAI,CAAC,OAAO,CAAC,gBAAgB;EACxD,IAAI,8BAA8B;EAClC,IAAG;EACH,EAAE,kBAAkB,CAAC,OAAO,CAAC,UAAU,MAAM,EAAE;EAC/C;EACA,IAAI,IAAI,QAAQ,GAAG,MAAM,CAAC,aAAa,CAAC,6BAA6B,EAAC;EACtE,IAAI,QAAQ,CAAC,KAAK,CAAC,MAAM,GAAG,UAAS;EACrC,IAAI,QAAQ,CAAC,KAAK,CAAC,MAAM,GAAG,QAAQ,CAAC,YAAY,GAAG,KAAI;EACxD,GAAG,EAAC;EACJ,CAAC;;;;;;;;"}